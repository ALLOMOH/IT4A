---
import "../styles/global.css";
import Header from "../components/react/Header";
import Footer from '../components/react/UI/Footer';

export interface Props {
  title?: string;
  description?: string;
}

const  {
  title = "",
  description = "IT Experts 4 Africa Solutions technologiques avancées",
} = Astro.props;

const isDarkTheme =
  typeof window !== "undefined" &&
  window.matchMedia &&
  window.matchMedia("(prefers-color-scheme:dark)").matches;

const favicon = isDarkTheme ? "/WhiteLogoH.png" : "/BlueLogoH.png";
---

<!doctype html>
<html class="scroll-smooth" lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />

    <title title="ITEXPERE4AFICA">{title}</title>

    <link
      rel="icon"
      type="image/png"
      href="/favicon/faviconLight/favicon-96x96.png"
      sizes="96x96"
    />
    <link rel="icon" type="image/svg+xml" href="/favicon/faviconLight/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/faviconLight/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/favicon/faviconLight/apple-touch-icon.png"
    />
    <meta name="apple-mobile-web-app-title" content="Ite4a" />
    <link rel="manifest" href="/favicon/faviconLight/site.webmanifest" />
  </head>
  
  
  <body class=" h-screen bg-black overflow-x-hidden font-Poppins dark">
    <Header 
		client:load 
		logo="/WhiteLogo.png" 
      navItems={[{ label: "Accueil", href: "/" }, { label: "À propos", href: "/about" }]} 
      ctaButton={{ label: "Contactez-nous", onClick: () => window.location.href = "/contact" }} 
    />
    <main>
      <slot />
    </main>
    <Footer client:load/>
  </body>
  
  
  <script is:inline>
    // Set the theme based on the user's preference
    const userTheme = window.matchMedia("(prefers-color-scheme: dark)").matches
      ? "dark"
      : "light";

    document.documentElement.classList.add(userTheme);
    (() => {
      const updatedFavicon = () => {
        const isDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches;
        document.getElementById("dynamic-favicon").href = isDark
          ? "/WhiteLogoH.png"
          : "/BlueLogoH.png";
      };

      // initial favicon setup
      updatedFavicon();
      //suveillance des changements de thème
      const darkMediaQuery = window.matchMedia("(prefers-color-scheme: dark)");
      darkMediaQuery.addEventListener("change", updatedFavicon);
      //Nettoyage
      window.addEventListener("beforeunload", () => {
        darkMediaQuery.removeEventListener("change", updatedFavicon);
      });
    })();
  </script>
</html>